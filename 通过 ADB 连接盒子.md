#### 前言

与常见的移动开发中通过 USB 线连接 Android 测试机不同，机顶盒的开发，是通过局域网来实现开发主机与测试盒子的连接的，其中 `adb` 是作为连接的工具。

#### 启动盒子的 adb 服务

要连接盒子，首先需要启动机顶盒系统的 `adb` 服务。

##### 准备工作

因为开发过程中，有可能需要改动系统的部分文件。为了能够对这些文件进行修改，我们需要以 `root` 的身份去启动 `adb` 服务。所以，我们在启动 `adb` 服务前，需要准备一个工作（这个工作的目的是为了让我们接下来启动 adb 服务后，它能够有 `root` 的权限去执行需要高权限的操作）。

准备工作很简单——在 `Launcher` 的主界面中，通过键盘输入 `616265` 这个字符序列，然后等出现一个 `root` 的提示，即完成。如下图所示：

![root](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/27863629.jpg)

`root` 成功后，我们进入下一个步骤——启动 `adb` 服务。

##### 启动 adb 服务

因为开发环境会接触到不同的系统，下面以常见的 `YUNOS` 以及`原生系统`来分别展示如何启动 `adb` 服务。有个共同的地方就是，它们都需要先去到系统的`设置`应用中，所以以下得展示都是从已经进入了`设置`这个应用为起点。

###### YUNOS

- 通用设置

  ![通用设置](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/96183468.jpg)

- 系统信息

  ![系统信息](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/12980468.jpg)

- 版权声明

  ![版权声明](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/55399339.jpg)

- 键盘中，以比较快的速度输入`左右左右左右`，就可以去到调试界面

  ![左右左右左右](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/30335951.jpg)

- 调试界面，然后将高亮框定位到`调试模式`，此时按下键盘 `Enter` 或者`左/右`方向键来改变该模式的开启状态。把它设置为`已开启`，则表示启动了 `adb` 服务。

  ![调试模式](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/57933809.jpg)

###### 原生系统

- 通用

  ![](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/52734791.jpg)

- 关于本机

  ![](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/60533359.jpg)

- 高亮框停留在“恢复出厂设置”，然后键盘输入`左右左右左右`的字符序列，看到 `start-service` 的弹出提示，即表示 `adb` 服务启动成功（输入相同的序列，可能会出现 `stop-service` 的提示，表示关闭成功）。

  ![](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/46765623.jpg)

#### 开发主机通过 adb 工具连接机顶盒

启动主机的终端（Windows系统的话，就是 `cmd` 或者 `PowerShell`），然后通过命令：

  ![](http://7xrgtg.com1.z0.glb.clouddn.com/16-3-8/2586446.jpg)

即可连接到相应 ip 地址的机顶盒。至此，应该可以在开发主机上看到 `logcat` 的输出信息。
